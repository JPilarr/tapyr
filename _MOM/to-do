MOM To-Do
=========

- Link, M_Link, Role:

  x Set `is_relevant` of all roles to True

  x Define Alias_Property for `hpk` that maps to `id` derived from objects
    linked

  x Is `Id_Entity.rename` correct for links ?

  x Implement `epk_to_hpk` to translate from `epk` to `hpk`

  x auto_cacher

  x check_type

  x Link3

  x Link2_Ordered

  * dfc_synthesizer

  * destroy_links / destroy_dependency

- M_Entity vs. M_E_Type:

  x Entity defines the specification of the essential class (`E_Spec`)

  x E_Type is automagically created without inheriting from Entity

    x There is an empty class hierarchy of bare essential E_Types (just
      containing `Essence` attributes)

      x The bare essential E_Type replaces the `E_Spec` in the appropriate
        package namespace and module.

    x For each DBW backend to support, a separate subclass of the essential
      E_Type is automagically derived, which contains the DBW specific
      attribute descriptors

      x The essential E_Type gets the meta-processed predicates

      x `Essence` refers to the bare essential E_Type

    + Support for multiple app-types (like in TOM) can be implemented the
      same way:

      # For each app-type, there is a class hierarchy of app-type specific
        E_Types, each defined thus:

        - `__dict__` is Entity.__dict__ updated with ATS.__dict__, except for
          _Attributes and _Predicates

        - derived from the bare essential E_Type and the app-type specific
          ancestor E_Types

      # For each DBW backend to support, a separate subclass of the app-type
        specific E_Type is automagically derived, which contains the DBW
        specific attribute descriptors

  x M_Entity __init__/__new__ does very little apart from remembering the
    essential classes (in the class attribute _M_Extension)

  x M_E_Type __init__/__new__ sets up the meta information for the essential
    classes

  x E_Type_Manager implements the basic query methods

    x Delegation to EMS-manager of scope

    x Subclasses of M_E_Type_Id implemented object- and link-specific query
      methods

x Id_Entity renaming:

  x `rename` isn't a method of the public API

  x `set` and `set_raw` need to deal with changes in primary key attributes

  x Assignment to primary key attributes is forbidden

x Attr.Kind:

  x remove all dependencies on `obj._attr_man.attr_values [self.attr_dict_name]`

- Scope:

  x Scope just holds (dbw-specific) managers for objects and links

  * change signature of `remove` and `rename`

  x use `.epk` instead of `.name` to identify objects

  x keyed-entities just call `self.home_scope.add (self)`

    x For objects, there is a manager object that manages a hash-table of
      objects (analogous to the meta-link).

    x This architecture also allows separate hash-tables for different object
      types (using several managers).

- App_Type

  x Dictionary PNS_Set mapping the fully qualified names of essential package
    namespaces to the namespaces in question

  * Use `entity_type` instead of `etype` as method name

- Dependency management: move to DBW-Mixin for Scope

      # referential integrity

        = `_destroy` uses `notify_dependencies_destroy`

        = `rename` uses `self.dependencies` to call `update_dependency_names`

      # `has_substance` uses `self.dependencies`

- count: move to DBW-Mixin for Scope

- Replace `default_sort_key` (essential attribute) by class attribute
  `sorted_by`

  x Implement `Sorted_By` to interpret list of attribute names as
    sort-key (including `-name` for reverse sorting for some attributes)

x Simplify attribute handling ?

  x Move pickle handling out of Entity

  x `set` only handles cooked values

  x `on_error` callback for `set` and `set_raw` instead of
    `raise_exception`

- Documenter:

  x separate from Entity

  * Need to replace references to `obj.Documenter`

    (like in MOM.Error.Invariant_Error)

- MOM.Error:

  * change doc-strings to describe the error

- Rewrite pickling

  * Inject after_init_db into Entity

  * Implement pickling/unpickling of entities

### __END__ to-do
