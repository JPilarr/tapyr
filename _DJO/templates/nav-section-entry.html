{# Django template: nav-section-entry.html #}
{% comment %}
  ## Copyright (C) 2008 Mag. Christian Tanzer. All rights reserved
  ## Glasauergasse 32, A--1130 Wien, Austria. tanzer@swing.co.at
  ##
  ##
  ##++
  ## Name
  ##    nav-section-entry
  ##
  ## Purpose
  ##    Template for one entry of a nav-section
  ##
  ## Revision Dates
  ##    29-Feb-2008 (CT) Creation (factored from nav-section-level.html)
  ##    29-Feb-2008 (CT) Changed to recursively `rrender
  ##                     "nav-section-level.html"` for sub-sections
  ##    13-Apr-2008 (CT) Check `ifequal link.href page.link.href` instead of
  ##                     `ifequal link page.link` to determine `current-link`
  ##    21-May-2008 (CT) s/page.link/page/w
  ##    23-May-2008 (CT) `if link.href` moved from outermost to innermost
  ##    26-Sep-2008 (CT) Use `nav_page` instead of `page` to access `href`
  ##                     and `prefix`
  ##    ««revision-date»»···
  ##--
{% endcomment %}
{% load TGL %}
{% let %}
  {% blet level %}level-{{ link.level|default:0 }}{% endblet %}
  {% if nav_page.prefix|starts_with:link.prefix and link.own_links %}
    <li class="current-section {{ level }}">{{ link.title }}
      {% rrender "nav-section-level.html" link_list=link.own_links %}
    </li>
  {% else %}
    {% ifequal link.href nav_page.href %}
      <li class="current-link {{ level }}">{{ link.title }}</li>
    {% else %}
      {% if link.href %}
        <li class="nav-link {{ level }}">
          <a href="{{ link.site_prefix }}{{ link.href }}"
             {% if link.desc %}title="{{ link.desc }}"{% endif %}
          >{{ link.title }}</a>
        </li>
      {% else %}
        <li class="no-link">{{ link.title|safe }}</li>
      {% endif %}
    {% endifequal %}
  {% endif %}
{% endlet %}
{# __END__ Django template: nav-section-entry.html #}
