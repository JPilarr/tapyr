{# Django template: nested_model_form.html #}
{% comment %}
  ## Copyright (C) 2009 Mag. Christian Tanzer. All rights reserved
  ## Glasauergasse 32, A--1130 Wien, Austria. tanzer@swing.co.at
  ##
  ##++
  ## Name
  ##    nested_model_form_table
  ##
  ## Purpose
  ##    Template rendering a nested form inside a model form as a table
  ##
  ## Revision Dates
  ##    18-Jun-2009 (CT) Creation
  ##    19-Jun-2009 (CT) `field_group_tr_head` and `field_group_tr_body`
  ##                      factored
  ##     9-Jul-2009 (MG) Added `title` to `legend`,`css_class` passed to
  ##                     `rrender` of `field_group_tr_body.html`
  ##    ««revision-date»»···
  ##--
{% endcomment %}
{% load i18n TGL %}
  <fieldset class="{{ field_group.css_class|default:"nested-many-2-many-table"}}">
    {% if field_group.legend %}<legend title="{{ field_group.name|capfirst}}">{{ field_group.legend }}</legend>{% endif %}
    {{ field_group.object_count }}
    <div class="One-Link">
      <table class="Field_Group-Horizontal">
        <thead>
          {% rrender "field_group_tr_head.html" field_group=field_group.forms.0.field_groups.0 %}
        </thead>
        <tbody>
          {% for form in field_group.forms %}
            {% for fs in form.field_groups %}
              {% rrender "field_group_tr_body.html" field_group=fs;css_class="m2m-clone" %}
            {% endfor %}
          {% endfor %}
        </tbody>
      </table>
    </div>
  </fieldset>
  {% comment %}
  <script type="text/javascript">
    jQuery
      ( function ()
          { jQuery
              ( "fieldset.{{ field_group.css_class|default:"nested-many-2-many"}}"
              ).nested_many_2_many_setup ();
          }
      )
  </script>
  {% endcomment %}
{# __END__ Django template: nested_model_form_table.html #}
