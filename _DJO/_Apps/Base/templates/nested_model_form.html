{# Django template: nested_model_form.html #}
{% comment %}
  ## Copyright (C) 2009 Martin Glück All rights reserved
  ## Langstrasse 4, 2244 Spannberg, Austria. martin@mangari.org
  ##
  ##++
  ## Name
  ##    nested_model_form
  ##
  ## Purpose
  ##    Template rendering a nested from inside a model form
  ##
  ## Revision Dates
  ##     6-Jun-2009 (MG) Creation
  ##     9-Jul-2009 (MG) `m2m-clone` added to `div`
  ##     9-Jul-2009 (MG) Prototype generation added
  ##    19-Aug-2009 (CT) Add `field_group.Name` to `class` of `fieldset`
  ##    ««revision-date»»···
  ##--
{% endcomment %}
{% load i18n TGL %}
  <fieldset class="{{ field_group.css_class|default:"nested-many-2-many"}} {{ field_group.Name }}">
    {% if field_group.legend %}<legend>{{ field_group.legend }}</legend>{% endif %}
    {{ field_group.object_count }}
    <div class="One-Link">
      <div class="m2m-prototype m2m-nested-form">
        {% for fs in field_group.prototype.field_groups %}
          <div class="field_group {{ field_group.css_class }}"
             {% if fs.legend %}title="{{ fs.legend }}"{% endif %}
          >
            {% rrender fs.template|default:"field_group_div_seq.html" field_group=fs %}
          </div>
        {% endfor %}
      </div>
      {% for form in field_group.forms %}
        <div class="m2m-nested-form">
        {% for fs in form.field_groups %}
          <div class="field_group {{ field_group.css_class }}"
             {% if fs.legend %}title="{{ fs.legend }}"{% endif %}
          >
            {% rrender fs.template|default:"field_group_div_seq.html" field_group=fs %}
          </div>
        {% endfor %}
        </div>
      {% endfor %}
    </div>
  </fieldset>
{# __END__ Django template: nested_model_form.html #}
