/*
Run this like::
    $ /usr/bin/js -s -f GTW/AFS/Elements.test -i

to get an interactive Javascript shell with GTW.js and GTW/AFS/Elements.js
loaded

*/
load ("GTW.js")
load ("GTW/AFS/Elements.js")
load ("GTW/inspect.js")
load ("GTW/jsonify.js")
var f = new $GTW.AFS.Form (
    { $id      : "X:"
    , children :
        [ { $id       : "X:1"
          , name      : "PAP.Person"
          , type      : "Entity"
          , children  :
              [ { $id        : "X:1.1"
                , name       : "last_name"
                , type       : "Field"
                }
              , { $id        : "X:1.2"
                , name       : "first_name"
                , type       : "Field"
                }
              , { $id        : "X:1.3"
                , name       : "lifetime"
                , type       : "Fieldset"
                , children   :
                    [ { $id        : "X:1.3.1"
                      , name       : "start"
                      , type       : "Field"
                      }
                    , { $id        : "X:1.3.2"
                      , name       : "finish"
                      , type       : "Field"
                      }
                    ]
                }
              ]
          }
        , { $id       : "X:2"
          , name      : "SRM.Boat_Type"
          , type      : "Entity"
          , children  :
              [ { $id        : "X:2.1"
                , name       : "name"
                , type       : "Field"
                }
              ]
          }
        ]
    }
  , { "X:1" :
        { pid       : 4711
        , cid       : 42
        , "X:1.1"     :
            { init       : "Tanzer" }
        , "X:1.2"     :
            { init       : "Christian" }
        , "X:1.3"     :
            { "X:1.3.1"  :
                { init   : "1959/09/26" }
            , "X:1.3.2"  :
                { init   : "" }
            }
        }
    , "X:2" :
        { pid       : 80
        , cid       : 45
        , "X:2.1"     :
            { init       : "Laser" }
        }
    }
);
print ("$GTW :\n" + $GTW.inspect.show ($GTW, undefined, 1));

var g = new $GTW.AFS.Form ({"$id": "F", "type": "Form", "children": [{"$id": "F-1", "type_name": "PAP.Person", "type": "Entity", "children": [{"$id": "F-1:1", "type": "Fieldset", "name": "primary", "children": [{"$id": "F-1:1:1", "type": "Field", "name": "last_name"}, {"$id": "F-1:1:2", "type": "Field", "name": "first_name"}]}, {"$id": "F-1:2", "type": "Field_Composite", "name": "lifetime", "children": [{"$id": "F-1:2.1", "type": "Field", "name": "start"}, {"$id": "F-1:2.2", "type": "Field", "name": "finish"}]}, {"$id": "F-1:3", "type": "Entity_List", "children": [{"$id": "F-1:3::1", "type_name": "PAP.Person_has_Email", "type": "Entity", "children": [{"$id": "F-1:3::1:1", "type": "Field", "name": "desc"}, {"$id": "F-1:3::1:2", "type_name": "PAP.Email", "type": "Entity", "children": [{"$id": "F-1:3::1:2:1", "type": "Field", "name": "address"}]}]}, {"$id": "F-1:3::2", "type_name": "PAP.Person_has_Email", "type": "Entity", "children": [{"$id": "F-1:3::2:1", "type": "Field", "name": "desc"}, {"$id": "F-1:3::2:2", "type_name": "PAP.Email", "type": "Entity", "children": [{"$id": "F-1:3::2:2:1", "type": "Field", "name": "address"}]}]}]}]}, {"$id": "F-2", "type_name": "SRM.Boat_Type", "type": "Entity", "children": [{"$id": "F-2:1", "type": "Field", "name": "name"}]}]}, {});
print (
    "Test-Form:\n"
  + $GTW.inspect.show
      ( $GTW.AFS.Elements.id_map
      , undefined
      , 1
      , function (name, obj) { return name [0] == "F"; }
      )
);
